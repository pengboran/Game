var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};PIXI.Sprite.prototype.setTexture=function(e,t){void 0!==t&&this.texture.baseTexture.destroy(),this.texture=e,this.texture.baseTexture.skipRender=!1,this.texture.valid=!0,this.cachedTint=-1},PIXI.Sprite.prototype.getBounds=function(e){var t=e&&e instanceof PIXI.DisplayObject,r=!0;t?r=e instanceof PIXI.DisplayObjectContainer&&e.contains(this):e=this;var a;if(t){var n=e.worldTransform;for(e.worldTransform=PIXI.identityMatrix,a=0;a<e.children.length;a++)e.children[a].updateTransform()}var i,s,o,u=1/0,h=1/0,l=-(1/0),c=-(1/0),p=!1;for(a=0;a<this.children.length;a++){this.children[a].visible&&(p=!0,i=this.children[a].getBounds(),u=u<i.x?u:i.x,h=h<i.y?h:i.y,s=i.width+i.x,o=i.height+i.y,l=l>s?l:s,c=c>o?c:o)}var d=this._bounds;if(!p){d=new PIXI.Rectangle;var f=d.x,y=d.width+d.x,_=d.y,m=d.height+d.y,g=this.worldTransform,x=g.a,v=g.b,b=g.c,D=g.d,T=g.tx,B=g.ty,w=x*y+b*m+T,P=D*m+v*y+B,R=x*f+b*m+T,S=D*m+v*f+B,I=x*f+b*_+T,j=D*_+v*f+B,k=x*y+b*_+T,A=D*_+v*y+B;l=w,c=P,u=w,h=P,u=R<u?R:u,u=I<u?I:u,u=k<u?k:u,h=S<h?S:h,h=j<h?j:h,h=A<h?A:h,l=R>l?R:l,l=I>l?I:l,l=k>l?k:l,c=S>c?S:c,c=j>c?j:c,c=A>c?A:c}if(d.x=u,d.y=h,d.width=l-u,d.height=c-h,t)for(e.worldTransform=n,a=0;a<e.children.length;a++)e.children[a].updateTransform();if(!r){var O=e.getBounds();d.x-=O.x,d.y-=O.y}return d};var Rift;!function(e){var t=function(t){function r(e,r){t.call(this,e,r),this.Suffix="PhaserBones",this.ImageSuffix="_Image_"+this.Suffix,this.TextureSuffix="_TextureMap_"+this.Suffix,this.BonesSuffix="_Bones_"+this.Suffix,this.Cache=this.game.cache}return __extends(r,t),r.prototype.AddResourceByName=function(t,r){this.AddResources(t,new Array(new e.PhaserBones.Resource(e.PhaserBones.Enums.ResType.Image,r+"texture.png"),new e.PhaserBones.Resource(e.PhaserBones.Enums.ResType.TextureMap,r+"texture.json"),new e.PhaserBones.Resource(e.PhaserBones.Enums.ResType.Bones,r+"skeleton.json")))},r.prototype.GenerateFilesList=function(t,r){return this.AddResources(t,new Array(new e.PhaserBones.Resource(e.PhaserBones.Enums.ResType.Image,r+"texture.png"),new e.PhaserBones.Resource(e.PhaserBones.Enums.ResType.TextureMap,r+"texture.json"),new e.PhaserBones.Resource(e.PhaserBones.Enums.ResType.Bones,r+"skeleton.json"))),a={},a[r]=[{file:"texture",ext:"png",key:t+this.ImageSuffix},{file:"texture",ext:"json",key:t+this.TextureSuffix},{file:"skeleton",ext:"json",key:t+this.BonesSuffix}],a;var a},r.prototype.AddResources=function(e,t){for(var r=0;r<t.length;r++)this.AddResource(e,t[r])},r.prototype.AddResource=function(e,t){e=e.toLowerCase();var a=!1;for(var n in r.ObjDictionary)if(n==e){0==r.ObjDictionary[n].Resources.filter(function(e){return e.Type===t.Type}).length&&r.ObjDictionary[n].Resources.push(t),a=!0;break}a||(r.ObjDictionary[e]=new r.Object(new Array),r.ObjDictionary[e].Resources.push(t))},r.prototype.LoadResources=function(){for(var e in r.ObjDictionary)for(var t=0;t<r.ObjDictionary[e].Resources.length;t++){var a=r.ObjDictionary[e].Resources[t];if(!a.Loaded){switch(a.Type){case r.Enums.ResType.Image:this.game.load.image(e+this.ImageSuffix,a.FilePath);break;case r.Enums.ResType.TextureMap:this.game.load.json(e+this.TextureSuffix,a.FilePath);break;case r.Enums.ResType.Bones:this.game.load.json(e+this.BonesSuffix,a.FilePath)}a.Loaded=!0}}},r.prototype.CreateFactoryItem=function(t){t=t.toLowerCase();for(var a in r.ObjDictionary)if(!t||a==t){for(var n=r.ObjDictionary[a],i=new r.Object(n.Resources),s=null,o=null,u=null,h=0;h<i.Resources.length;h++){var l=i.Resources[h];switch(l.Type){case r.Enums.ResType.Image:s=this.Cache.getItem(a+this.ImageSuffix,e.PhaserBones.IMAGE).data;break;case r.Enums.ResType.TextureMap:o=this.Cache.getItem(a+this.TextureSuffix,e.PhaserBones.JSON).data;break;case r.Enums.ResType.Bones:u=this.Cache.getItem(a+this.BonesSuffix,e.PhaserBones.JSON).data}}return i.Skeleton=i.Factory.parseDragonBonesData(u),i.Factory.parseTextureAtlasData(o,s),i}return null},r.prototype.GetArmature=function(e,t){var r=this.CreateFactoryItem(e);null==t&&(t=r.Skeleton.armatureNames[0]);var a=r.Factory.buildArmatureDisplay(t);return r.Armature=a,this.RefreshClock(),r.Armature},r.prototype.RefreshClock=function(){var e=!1,t=dragonBones.PhaserFactory._clockHandler;this.game.time.events.events.forEach(function(r,a,n){if(r.callback==t)return void(e=!0)}),e||this.game.time.events.loop(20,dragonBones.PhaserFactory._clockHandler,dragonBones.PhaserFactory)},r.ObjDictionary={},r.IMAGE=2,r.JSON=11,r}(Phaser.Plugin);e.PhaserBones=t;var t;!function(e){var t=function(){function e(e){this.Factory=new dragonBones.PhaserFactory,this.Resources=e}return e}();e.Object=t;var r=function(){function e(e,t){this.Loaded=!1,this.Type=e,this.FilePath=t}return e}();e.Resource=r;!function(e){!function(e){e[e.Image=0]="Image",e[e.TextureMap=1]="TextureMap",e[e.Bones=2]="Bones"}(e.ResType||(e.ResType={}));e.ResType}(e.Enums||(e.Enums={}))}(t=e.PhaserBones||(e.PhaserBones={}))}(Rift||(Rift={}));var dragonBones;!function(e){var t=function(t){function r(a){void 0===a&&(a=null),t.call(this,a),r._eventManager||(r._eventManager=new e.PhaserArmatureDisplay,r._clock=new e.WorldClock)}return __extends(r,t),r._clockHandler=function(e){r._clock.advanceTime(-1)},Object.defineProperty(r,"factory",{get:function(){return r._factory||(r._factory=new r),r._factory},enumerable:!0,configurable:!0}),r.prototype._generateTextureAtlasData=function(t,r){return t?t.texture=r:t=e.BaseObject.borrowObject(e.PhaserTextureAtlasData),t},r.prototype._generateArmature=function(t){var a=e.BaseObject.borrowObject(e.Armature),n=new e.PhaserArmatureDisplay;return a._armatureData=t.armature,a._skinData=t.skin,a._animation=e.BaseObject.borrowObject(e.Animation),a._display=n,a._eventManager=r._eventManager,n._armature=a,a._animation._armature=a,a.animation.animations=t.armature.animations,a},r.prototype._generateSlot=function(t,r){var a=e.BaseObject.borrowObject(e.PhaserSlot),n=r.slot,i=[];a.name=n.name,a._rawDisplay=new Phaser.Sprite(game,0,0),a._meshDisplay=null;for(var s=0,o=r.displays.length;s<o;++s){var u=r.displays[s];switch(u.type){case 0:u.texture||(u.texture=this._getTextureData(t.dataName,u.name)),i.push(a._rawDisplay);break;case 2:u.texture||(u.texture=this._getTextureData(t.dataName,u.name)),i.push(a._meshDisplay);break;case 1:var h=this.buildArmature(u.name,t.dataName);if(h){if(!a.inheritAnimation){var l=n.actions.length>0?n.actions:h.armatureData.actions;if(l.length>0)for(var c=0,p=l.length;c<p;++c)h._bufferAction(l[c]);else h.animation.play()}u.armature=h.armatureData}i.push(h);break;default:i.push(null)}}return a._setDisplayList(i),a},r.prototype.buildArmatureDisplay=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=null);var a=this.buildArmature(e,t,r),n=a?a._display:null;return n&&n.advanceTimeBySelf(!0),n},r.prototype.getTextureDisplay=function(e,t){void 0===t&&(t=null);var r=this._getTextureData(t,e);if(r){if(!r.texture){var a=r.parent.texture,n=new Phaser.Rectangle(0,0,r.region.width,r.region.height);r.texture=new PIXI.Texture(a,r.region,n)}return new Phaser.Sprite(game,0,0,r.texture)}return null},Object.defineProperty(r.prototype,"soundEventManater",{get:function(){return r._eventManager},enumerable:!0,configurable:!0}),r._factory=null,r._eventManager=null,r._clock=null,r}(e.BaseFactory);e.PhaserFactory=t}(dragonBones||(dragonBones={}));var dragonBones;!function(e){var t=function(t){function a(){t.call(this)}return __extends(a,t),a.toString=function(){return"[class dragonBones.PhaserTextureAtlasData]"},a.prototype._onClear=function(){t.prototype._onClear.call(this),this.texture&&(this.texture=null)},a.prototype.generateTextureData=function(){return e.BaseObject.borrowObject(r)},a}(e.TextureAtlasData);e.PhaserTextureAtlasData=t;var r=function(e){function t(){e.call(this)}return __extends(t,e),t.toString=function(){return"[class dragonBones.PhaserTextureData]"},t.prototype._onClear=function(){e.prototype._onClear.call(this),this.texture&&(this.texture.destroy(!1),this.texture=null)},t}(e.TextureData);e.PhaserTextureData=r}(dragonBones||(dragonBones={}));var dragonBones;!function(e){var t=function(e){function t(){e.call(this)}return __extends(t,e),t.toString=function(){return"[class dragonBones.PhaserSlot]"},t.prototype.set_game=function(){},t.prototype._onClear=function(){e.prototype._onClear.call(this),this._renderDisplay=null},t.prototype._initDisplay=function(e){},t.prototype._disposeDisplay=function(e){e.destroy()},t.prototype._onUpdateDisplay=function(){this._rawDisplay||(this._rawDisplay=new Phaser.Sprite(game,0,0)),this._renderDisplay=this._display||this._rawDisplay},t.prototype._addDisplay=function(){this._armature._display.addChild(this._renderDisplay)},t.prototype._replaceDisplay=function(e){var t=this._armature._display,r=e;t.addChild(this._renderDisplay),t.swapChildren(this._renderDisplay,r),t.removeChild(r)},t.prototype._removeDisplay=function(){this._renderDisplay.parent.removeChild(this._renderDisplay)},t.prototype._updateVisible=function(){this._renderDisplay.visible=this._parent.visible},t.prototype._updateBlendMode=function(){},t.prototype._updateColor=function(){this._renderDisplay.alpha=this._colorTransform.alphaMultiplier},t.prototype._updateFilters=function(){},t.prototype._updateFrame=function(){var e=this._renderDisplay;if(this._display){var t=this._displayIndex<this._displayDataSet.displays.length?this._displayDataSet.displays[this._displayIndex]:null,r=this._displayIndex<this._replacedDisplayDataSet.length?this._replacedDisplayDataSet[this._displayIndex]:null,a=r||t,n=a.texture;if(n){var i=n.parent.texture;if(!n.texture&&i){var s=new PIXI.Rectangle(0,0,n.region.width,n.region.height);n.texture=new PIXI.Texture(i,n.region,n.region,s,n.rotated)}var o=this._armature._replacedTexture||n.texture;return this._updatePivot(t,a,n),o&&o.frame&&(e.setTexture(o),e.width=o.frame.width,e.height=o.frame.height,e.texture.baseTexture.skipRender=!1),o.baseTexture.resolution=1,o.baseTexture.source=i,void this._updateVisible()}}this._pivotX=0,this._pivotY=0,e.visible=!1,e.texture=null,e.x=this.origin.x,e.y=this.origin.y},t.prototype._updateMesh=function(){var e=null,t=this._ffdVertices.length>0;if(this._meshData.skinned)for(var r=0,a=0,n=this._meshData.vertices.length;r<n;r+=2){for(var i=r/2,s=this._meshData.boneIndices[i],o=this._meshData.boneVertices[i],u=this._meshData.weights[i],h=0,l=0,c=0,p=s.length;c<p;++c){var d=this._meshBones[s[c]],f=d.globalTransformMatrix,y=u[c],_=0,m=0;t?(_=o[2*c]+this._ffdVertices[a],m=o[2*c+1]+this._ffdVertices[a+1]):(_=o[2*c],m=o[2*c+1]),h+=(f.a*_+f.c*m+f.tx)*y,l+=(f.b*_+f.d*m+f.ty)*y,a+=2}e.vertices[r]=h,e.vertices[r+1]=l}else if(t)for(var g=this._meshData.vertices,r=0,n=this._meshData.vertices.length;r<n;r+=2){var h=g[r]+this._ffdVertices[r],l=g[r+1]+this._ffdVertices[r+1];e.vertices[r]=h,e.vertices[r+1]=l}},t.prototype._updateTransform=function(){this._renderDisplay.x=this.global.x,this._renderDisplay.y=this.global.y,this._renderDisplay.rotation=this.global.skewX,this._renderDisplay.scale.x=this.global.scaleX,this._renderDisplay.scale.y=this.global.scaleY,this._renderDisplay.pivot.x=this._pivotX,this._renderDisplay.pivot.y=this._pivotY},t}(e.Slot);e.PhaserSlot=t}(dragonBones||(dragonBones={}));var dragonBones;!function(e){var t=function(t){function r(){t.call(this,game,0,0,0),this.maxX=0,this.maxY=0}return __extends(r,t),r.prototype.SetBounds=function(e){(e||this.maxX<this.getBounds().width)&&(this.maxX=this.getBounds().width),(e||this.maxY<this.getBounds().height)&&(this.maxY=this.getBounds().height),this.body.setSize(this.maxX/2,this.maxX/2,this.maxY,0)},r.prototype._onClear=function(){this._armature=null,this._debugDrawer&&(this._debugDrawer.destroy(!0),this._debugDrawer=null),this.destroy(!0)},r.prototype._dispatchEvent=function(e){},r.prototype._debugDraw=function(){this._debugDrawer||(this._debugDrawer=new Phaser.Graphics(game)),this.addChild(this._debugDrawer),this._debugDrawer.clear();for(var e=this._armature.getBones(),t=0,r=e.length;t<r;++t){var a=e[t],n=Math.max(a.length,5),i=a.globalTransformMatrix.tx,s=a.globalTransformMatrix.ty,o=i+a.globalTransformMatrix.a*n,u=s+a.globalTransformMatrix.b*n;this._debugDrawer.lineStyle(1,a.ik?16711680:65280,.5),this._debugDrawer.moveTo(i,s),this._debugDrawer.lineTo(o,u)}},r.prototype.hasEvent=function(e){return!1},r.prototype.addEvent=function(e,t,r){},r.prototype.removeEvent=function(e,t,r){},r.prototype.advanceTimeBySelf=function(t){t?e.PhaserFactory._clock.add(this._armature):e.PhaserFactory._clock.remove(this._armature)},r.prototype.dispose=function(){this._armature&&(this.advanceTimeBySelf(!1),this._armature.dispose(),this._armature=null)},Object.defineProperty(r.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"animation",{get:function(){return this._armature.animation},enumerable:!0,configurable:!0}),r.prototype.animate=function(e){if(this.animation.lastAnimationName!=e){this.animation.play(e);for(var t=this.children.length-1;t>=0;t--){null==this.getChildAt(t).texture&&this.removeChildAt(t)}}},r}(Phaser.Sprite);e.PhaserArmatureDisplay=t}(dragonBones||(dragonBones={}));/*  |xGv00|e3c2af094cd2cbb1b02d51471bb96b09 */